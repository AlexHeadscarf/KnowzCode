{
  "name": "check-installation-status",
  "version": "2.0.0",
  "description": "Checks if KnowzCode is initialized in the current project and reports current status",

  "parameters": [],

  "actions": [
    {
      "type": "python",
      "code": "from pathlib import Path\n\nknowzcode_dir = Path('knowzcode')\n\nif not knowzcode_dir.exists():\n    outputs['initialized'] = False\n    outputs['commands_count'] = 0\n    outputs['skills_count'] = 0\n    outputs['agents_count'] = 0\n    outputs['has_required_files'] = False\n    exit()\n\n# Check required files exist\nrequired_files = [\n    'knowzcode_loop.md',\n    'knowzcode_tracker.md',\n    'knowzcode_project.md',\n    'knowzcode_architecture.md'\n]\n\nmissing_files = [f for f in required_files if not (knowzcode_dir / f).exists()]\nhas_required_files = len(missing_files) == 0\n\n# Count components from various possible locations\n\n# Check .claude directory\nclaude_dir = Path('.claude')\ncommands_count = 0\nskills_count = 0\nagents_count = 0\n\nif claude_dir.exists():\n    if (claude_dir / 'commands').exists():\n        commands_count = len(list((claude_dir / 'commands').glob('*.md')))\n    if (claude_dir / 'skills').exists():\n        skills_count = len(list((claude_dir / 'skills').glob('*.json')))\n    if (claude_dir / 'agents').exists():\n        agents_count = len(list((claude_dir / 'agents').glob('*.md')))\n    if (claude_dir / 'subagents').exists():\n        agents_count += len(list((claude_dir / 'subagents').glob('*.yaml')))\n\n# Also check top-level directories (plugin installation)\nif Path('commands').exists():\n    commands_count = max(commands_count, len(list(Path('commands').glob('*.md'))))\nif Path('skills').exists():\n    skills_count = max(skills_count, len(list(Path('skills').glob('*.json'))))\nif Path('agents').exists():\n    agents_count = max(agents_count, len(list(Path('agents').glob('*.md'))))\n\noutputs['initialized'] = has_required_files\noutputs['commands_count'] = commands_count\noutputs['skills_count'] = skills_count\noutputs['agents_count'] = agents_count\noutputs['has_required_files'] = has_required_files\noutputs['missing_files'] = missing_files if missing_files else None"
    }
  ]
}
